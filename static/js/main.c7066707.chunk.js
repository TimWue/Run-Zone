(this["webpackJsonprun-zone-ts"]=this["webpackJsonprun-zone-ts"]||[]).push([[0],{43:function(n,e,t){},44:function(n,e,t){},53:function(n,e,t){"use strict";t.r(e);var r,c=t(0),o=t.n(c),i=t(22),a=t.n(i),s=(t(43),t(3)),u=(t(44),t(15)),j=t(5),l=t(10),b=t(1),d=Object(c.createContext)({runnerPosition:void 0,runnerSpeed:null,runner:void 0,runs:[],setRunner:function(n){},setRuns:function(n){},addRun:function(n){},setRunnerPosition:function(n){}}),O=function(n){var e=n.children,t=Object(c.useState)([]),r=Object(j.a)(t,2),o=r[0],i=r[1],a=Object(c.useState)(),s=Object(j.a)(a,2),O=s[0],x=s[1],f=Object(c.useState)(null),h=Object(j.a)(f,2),p=h[0],g=h[1],R=Object(c.useState)(),v=Object(j.a)(R,2),m=v[0],S=v[1],w={enableHighAccuracy:!0},N=function(n){console.warn("ERROR(".concat(n.code,"): ").concat(n.message))},k=function(n){x(new l.LatLng(n.coords.latitude,n.coords.longitude)),n.coords.speed&&g((3.6*n.coords.speed).toFixed(1))};return Object(c.useEffect)((function(){navigator.geolocation.watchPosition(k,N,w)}),[]),Object(b.jsx)(d.Provider,{value:{runner:m,setRunner:S,runs:o,setRuns:i,runnerPosition:O,setRunnerPosition:x,addRun:function(n){i((function(e){return[].concat(Object(u.a)(e),[n])}))},runnerSpeed:p},children:e})};!function(n){n.RUNNER="runner",n.RUNS="runs"}(r||(r={}));var x,f,h,p,g,R=function(){return{getRunner:function(){var n=localStorage.getItem(r.RUNNER);return n?JSON.parse(n):void 0},setRunner:function(n){localStorage.setItem(r.RUNNER,JSON.stringify(n))},removeRunner:function(){localStorage.removeItem(r.RUNNER)}}},v=t(4);!function(n){n.FONT_FAMILY_MAIN="Open Sans Condensed, sans-serif",n.BACKGROUND_COLOR_MAIN="#343a40",n.BACKGROUND_COLOR_SECOND="#5f9ea0",n.FONT_SIZE_NORMAL="16px",n.FONT_SIZE_LARGER="20px",n.FONT_SIZE_LARGE="24px"}(x||(x={}));var m,S,w,N,k,C,_,E,I,y,A,T,F,L=function(n){var e=Object(c.useState)(""),t=Object(j.a)(e,2),r=t[0],o=t[1],i=R(),a=Object(c.useContext)(d).setRunner;return Object(b.jsxs)(z,{children:[Object(b.jsx)(P,{children:"Willkommen!"}),Object(b.jsx)(D,{type:"text",onChange:function(n){o(n.target.value)},value:r,placeholder:"Wie hei\xdft du?"}),Object(b.jsx)(M,{onClick:function(){console.log("Login "+r);var n={runnerName:r,runnerRunIds:[]};i.setRunner(n),a(n)},children:"Login"})]})},P=v.a.h3(f||(f=Object(s.a)(["\n  font-family: ",";\n  font-size: ",";\n  text-transform: uppercase;\n  color: #343a40;\n  font-weight: bold;\n  margin: 0 0 30% 0;\n"])),x.FONT_FAMILY_MAIN,x.FONT_SIZE_LARGER),z=v.a.div(h||(h=Object(s.a)(["\n  width: 20%;\n  min-width: 300px;\n  height: 80%;\n  min-height: 500px;\n  background-color: aliceblue;\n  border-radius: 10px;\n  box-shadow: 10px 10px #282c34;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 10% auto auto auto;\n"]))),D=v.a.input(p||(p=Object(s.a)(["\n  width: 70%;\n  height: 40px;\n  border: none;\n  border-radius: 10px;\n  margin: 5px;\n  text-align: center;\n"]))),M=v.a.button(g||(g=Object(s.a)(["\n  width: 70%;\n  height: 50px;\n  background-color: #343a40;\n  color: white;\n  border-radius: 10px;\n  margin: 5px;\n"]))),G=t(36),U=t(60),Z=t(58),W=t(55),B=t(31),J=function(){return{track2Polygon:function(n){return n.map((function(n){return[n.latitude,n.longitude]}))},calcArea:function(n){var e=n.map((function(n){return[n.latitude,n.longitude]})),t=Object(B.polygon)([e]);return Object(B.area)(t)/1e6}}},K=function(n){var e=n.runs,t=J();return Object(b.jsx)(b.Fragment,{children:e.map((function(n,e){return Object(b.jsx)(W.a,{positions:t.track2Polygon(n.track.trackPoints)})}))})},Y=t(56),H=t(57),V=function(){var n=Object(c.useContext)(d).runnerPosition,e=Object(Y.a)();return Object(c.useEffect)((function(){n&&e.setView(n)}),[n]),Object(b.jsx)(b.Fragment,{children:n&&Object(b.jsx)(H.a,{position:n})})},q=function(n){var e=n.setShowRuns;return Object(b.jsx)("div",{className:"leaflet-top leaflet-right",children:Object(b.jsx)("div",{className:"leaflet-control",children:Object(b.jsx)("button",{onClick:function(){return e((function(n){return!n}))},children:"Show Runs"})})})},Q=function(n){Object(G.a)(n);var e=Object(c.useContext)(d).runs,t=Object(c.useState)(!1),r=Object(j.a)(t,2),o=r[0],i=r[1];return Object(b.jsxs)(X,{className:"basicMap",center:[0,0],zoom:20,scrollWheelZoom:!1,children:[Object(b.jsx)(U.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),o&&Object(b.jsx)(K,{runs:e}),Object(b.jsx)(V,{}),Object(b.jsx)(q,{setShowRuns:i})]})},X=Object(v.a)(Z.a)(m||(m=Object(s.a)(["\n  width: 100%;\n  height: 400px;\n  border-radius: 8px;\n"]))),$=function(n){return Object(b.jsx)(Q,{})},nn=Object(c.createContext)({}),en=function(n){var e=n.children,t=Object(c.useState)(),r=Object(j.a)(t,2),o=r[0],i=r[1],a=Object(c.useState)([]),s=Object(j.a)(a,2),l=s[0],d=s[1],O=Object(c.useState)(),x=Object(j.a)(O,2),f=x[0],h=x[1],p=Object(c.useState)(!1),g=Object(j.a)(p,2),R=g[0],v=g[1];return Object(b.jsx)(nn.Provider,{value:{startTime:o,isRunning:R,setIsRunning:v,run:f,startRun:function(){console.log("Start Run"),i(Date.now()),v(!0)},stopRun:function(){console.log("Stop Run"),h({track:{trackPoints:l},startTime:o||Date.now(),endTime:Date.now()}),v(!1)},addTrackPoint:function(n){console.log("Add TrackPoint: ",n),d((function(e){return[].concat(Object(u.a)(e),[n])}))},resetRun:function(){h(void 0),i(void 0),d([])}},children:e})},tn=function(){var n=localStorage.getItem(r.RUNS),e=n?JSON.parse(n):void 0;return{saveRuns:function(n){localStorage.setItem(r.RUNS,JSON.stringify(n))},getAllRuns:function(){return e}}},rn=t(59),cn=t(61),on=function(){var n=Object(c.useContext)(d).runnerPosition,e=Object(c.useContext)(nn),t=e.addTrackPoint,r=e.startRun,o=e.stopRun,i=e.run,a=e.resetRun,s=e.isRunning,j=Object(c.useContext)(d),l=j.addRun,O=j.runs,x=tn();Object(c.useEffect)((function(){s&&f()}),[n]);var f=function(){n&&t({latitude:n.lat,longitude:n.lng,time:Date.now()})};return Object(b.jsxs)(rn.a,{size:"lg",children:[Object(b.jsx)(cn.a,{onClick:function(){r()},disabled:s,variant:"dark",children:"Start"}),Object(b.jsx)(cn.a,{onClick:function(){o()},disabled:!s,variant:"dark",children:"Stop"}),Object(b.jsx)(cn.a,{onClick:function(){console.log("Save run"),x.saveRuns([].concat(Object(u.a)(O),[i])),l(i)},disabled:s,variant:"dark",children:"Save"}),Object(b.jsx)(cn.a,{onClick:function(){console.log("Reset run"),a()},disabled:s,variant:"dark",children:"Reset"})]})},an=function(n){var e=n.property,t=n.value;return Object(b.jsxs)(sn,{children:[Object(b.jsx)(jn,{children:e}),Object(b.jsx)(ln,{children:t})]})},sn=v.a.div(S||(S=Object(s.a)(["\n  width: 20%;\n  min-width: 120px;\n  background-color: #555;\n  border-radius: 10px;\n  padding: 10px;\n  margin: 10px 5px 10px 5px;\n"]))),un=v.a.div(w||(w=Object(s.a)(["\n  font-family: Open Sans Condensed, sans-serif;\n  font-weight: bold;\n  text-transform: uppercase;\n  color: #eee;\n"]))),jn=Object(v.a)(un)(N||(N=Object(s.a)(["\n  font-size: ",";\n"])),x.FONT_SIZE_LARGER),ln=Object(v.a)(un)(k||(k=Object(s.a)(["\n  font-size: ",";\n"])),x.FONT_SIZE_LARGER),bn=function(){var n=Object(c.useContext)(d).runnerSpeed,e=Object(c.useContext)(nn),t=e.startTime,r=e.isRunning,o=Object(c.useState)(0),i=Object(j.a)(o,2),a=i[0],s=i[1],u=Object(c.useState)(),l=Object(j.a)(u,2),O=l[0],x=l[1];return Object(c.useEffect)((function(){if(r){var n=setInterval((function(){t&&s(Date.now()-t)}),1e3);x(n)}else O&&clearInterval(O)}),[r]),Object(b.jsxs)(dn,{children:[Object(b.jsx)(an,{property:"Speed",value:n?n+" [km/h]":"--"}),Object(b.jsx)(an,{property:"Time",value:new Date(a).toISOString().substr(11,8)})]})},dn=v.a.div(C||(C=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 50%;\n  padding: 5px;\n  flex-wrap: wrap;\n"]))),On=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)($,{}),Object(b.jsx)(on,{}),Object(b.jsx)(bn,{})]})},xn=t(16),fn=t(17),hn=function(n){var e=n.run,t=J();return Object(b.jsxs)(vn,{children:[Object(b.jsxs)(Sn,{className:"basicMap",center:function(n){var e=n.track.trackPoints[0];return new l.LatLng(e.latitude,e.longitude)}(e),zoom:20,dragging:!1,zoomControl:!1,children:[Object(b.jsx)(U.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),Object(b.jsx)(W.a,{positions:t.track2Polygon(e.track.trackPoints)})]}),Object(b.jsxs)(mn,{children:[Object(b.jsxs)(gn,{children:[Object(b.jsx)(xn.a,{icon:fn.b}),Object(b.jsx)(Rn,{children:new Date(e.startTime).toDateString()})]}),Object(b.jsxs)(gn,{children:[Object(b.jsx)(xn.a,{icon:fn.c}),Object(b.jsx)(Rn,{children:new Date(e.endTime-e.startTime).toISOString().substr(11,8)})]}),Object(b.jsxs)(gn,{children:[Object(b.jsx)(xn.a,{icon:fn.d}),Object(b.jsx)(Rn,{children:"10.2 km"})]}),Object(b.jsx)(pn,{children:"Details"})]})]})},pn=v.a.button(_||(_=Object(s.a)(["\n  max-width: 150px;\n  background-color: ",";\n  color: #282c34;\n  border: none;\n  border-radius: 5px;\n  box-shadow: 5px 5px 10px #282c34;\n  &:active {\n    box-shadow: 0 0;\n  }\n"])),x.BACKGROUND_COLOR_SECOND),gn=v.a.div(E||(E=Object(s.a)(["\n  color: white;\n  font-size: ",";\n  font-family: ",";\n  display: inline-flex;\n  margin: 5px;\n"])),x.FONT_SIZE_NORMAL,x.FONT_FAMILY_MAIN),Rn=v.a.div(I||(I=Object(s.a)(["\n  margin-left: 10px;\n"]))),vn=v.a.div(y||(y=Object(s.a)(["\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  box-shadow: 5px 5px 5px #282c34;\n  border-radius: 5px;\n  margin-bottom: 15px;\n"]))),mn=v.a.div(A||(A=Object(s.a)(["\n  width: 50%;\n  padding-left: 5px;\n  display: flex;\n  flex-direction: column;\n"]))),Sn=Object(v.a)(Z.a)(T||(T=Object(s.a)(["\n  width: 150px;\n  height: 150px;\n  border-radius: 8px;\n  border: none;\n  margin: 5px;\n"]))),wn=function(){var n=Object(c.useContext)(d).runs;return Object(b.jsx)(b.Fragment,{children:n.map((function(n){return Object(b.jsx)(hn,{run:n})}))})};!function(n){n.ROOT="/",n.NEW="new",n.RUNS="runs"}(F||(F={}));var Nn,kn,Cn,_n,En,In,yn,An,Tn,Fn,Ln=t(2),Pn=t(18),zn=function(n){var e=n.to,t=n.value;return Object(b.jsx)(Dn,{children:Object(b.jsx)(Mn,{to:e,children:t})})},Dn=v.a.div(Nn||(Nn=Object(s.a)(["\n  width: 100%;\n  text-align: center;\n  &:hover {\n    background-color: aliceblue;\n    color: #282c34;\n  }\n"]))),Mn=Object(v.a)(Pn.b)(kn||(kn=Object(s.a)(["\n  color: inherit;\n  font-size: ",";\n  &:hover {\n    text-decoration: none;\n    color: inherit;\n    background-color: inherit;\n  }\n"])),x.FONT_SIZE_LARGER),Gn=function(){var n=Object(c.useContext)(d),e=n.setRunner,t=n.setRuns,r=tn(),o=R();return{initRuns:function(){t(r.getAllRuns())},initRunner:function(){e(o.getRunner())},removeRunner:function(){e(void 0),o.removeRunner()}}},Un=function(){var n=Object(c.useState)(!1),e=Object(j.a)(n,2),t=e[0],r=e[1],o=Gn();return Object(b.jsxs)(Zn,{onClick:function(){return r(!t)},children:[Object(b.jsx)(xn.a,{icon:fn.a}),Object(b.jsxs)(Wn,{show:t,children:[Object(b.jsx)(zn,{to:F.NEW,value:"Neu"}),Object(b.jsx)(zn,{to:F.RUNS,value:"L\xe4ufe"}),Object(b.jsx)(Bn,{onClick:function(){return o.removeRunner()},children:"Logout"})]})]})},Zn=v.a.div(Cn||(Cn=Object(s.a)(["\n  position: relative;\n  display: inline-block;\n  color: white;\n  font-size: ",";\n"])),x.FONT_SIZE_LARGER),Wn=v.a.div(_n||(_n=Object(s.a)(["\n  color: white;\n  background-color: ",";\n  display: ",";\n  position: absolute;\n  z-index: 1;\n  right: -200%;\n  box-shadow: 0px 0px 10px #282c34;\n  width: 100px;\n"])),x.BACKGROUND_COLOR_MAIN,(function(n){return n.show?"block":"none"})),Bn=v.a.div(En||(En=Object(s.a)(["\n  text-align: center;\n  font-size: ",";\n  border: none;\n  cursor: pointer;\n  &:hover {\n    background-color: aliceblue;\n    color: #282c34;\n  }\n"])),x.FONT_SIZE_LARGER),Jn=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Kn,{children:"Run Zone"}),Object(b.jsx)(Un,{})]})},Kn=v.a.h2(In||(In=Object(s.a)(["\n  color: #eee;\n  font-family: Open Sans Condensed, sans-serif;\n  font-size: ",";\n  font-weight: bold;\n  line-height: 48px;\n  padding: 0 5px;\n  text-align: center;\n  text-transform: uppercase;\n  min-width: 200px;\n"])),x.FONT_SIZE_LARGER),Yn=function(){var n=Object(c.useContext)(d).runner;return Object(b.jsx)(Vn,{children:Object(b.jsxs)(Hn,{children:["Willkommen",Object(b.jsx)("br",{}),n.runnerName]})})},Hn=v.a.h3(yn||(yn=Object(s.a)(["\n  font-family: ",";\n  text-align: center;\n  font-size: ",";\n  color: white;\n"])),x.FONT_FAMILY_MAIN,x.FONT_SIZE_LARGE),Vn=v.a.div(An||(An=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 10% 0 0 0;\n"])));var qn=v.a.div(Tn||(Tn=Object(s.a)(["\n  width: 80%;\n  height: 100%;\n  margin: auto;\n"]))),Qn=v.a.div(Fn||(Fn=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 1% 0 1% 0;\n  flex-wrap: wrap;\n  margin: 20px 0 20px 0;\n"]))),Xn=function(){var n=Object(c.useContext)(d).runner,e=Gn();return Object(c.useEffect)((function(){e.initRuns(),e.initRunner()}),[]),n?Object(b.jsxs)(qn,{children:[Object(b.jsx)(Qn,{children:Object(b.jsx)(Jn,{})}),Object(b.jsxs)(Ln.c,{children:[Object(b.jsx)(Ln.a,{path:F.ROOT,element:Object(b.jsx)(Yn,{})}),Object(b.jsx)(Ln.a,{path:F.NEW,element:Object(b.jsx)(On,{})}),Object(b.jsx)(Ln.a,{path:F.RUNS,element:Object(b.jsx)(wn,{})})]})]}):Object(b.jsx)(qn,{children:Object(b.jsx)(L,{})})},$n=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,62)).then((function(e){var t=e.getCLS,r=e.getFID,c=e.getFCP,o=e.getLCP,i=e.getTTFB;t(n),r(n),c(n),o(n),i(n)}))};a.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(en,{children:Object(b.jsx)(Pn.a,{children:Object(b.jsx)(Xn,{})})})})}),document.getElementById("root")),$n()}},[[53,1,2]]]);
//# sourceMappingURL=main.c7066707.chunk.js.map