(this["webpackJsonprun-zone-ts"]=this["webpackJsonprun-zone-ts"]||[]).push([[0],{23:function(e,n,t){},24:function(e,n,t){},28:function(e,n,t){"use strict";t.r(n);var r=t(0),c=t.n(r),u=t(12),o=t.n(u),s=(t(23),t(24),t(7)),a=t.n(s),i=t(14),j=function(e,n){return{getRuns:function(t){return Object(i.a)(a.a.mark((function r(){var c,u;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return c=[],r.next=3,e.getTracks(t);case 3:return u=r.sent,r.next=6,Promise.all(u.map(function(){var e=Object(i.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getRun(t);case 2:(r=e.sent)&&c.push(r);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()));case 6:return r.abrupt("return",c);case 7:case"end":return r.stop()}}),r)})))()},getRunner:function(n){return Object(i.a)(a.a.mark((function t(){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getRunner(n);case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)})))()}}},l=t(2),d=t(32),b=t(33),O=t(9),f=t(1),g=Object(r.createContext)({runnerPosition:void 0,runner:{runnerName:"",runnerRunIds:[]},runs:[],setRunner:function(e){},setRuns:function(e){},addRun:function(e){},setRunnerPosition:function(e){}}),x=function(e){var n=e.children,t=Object(r.useState)(),c=Object(l.a)(t,2),u=c[0],o=c[1],s=Object(r.useState)({runnerName:"",runnerRunIds:[]}),a=Object(l.a)(s,2),i=a[0],j=a[1],d=Object(r.useState)([]),b=Object(l.a)(d,2),x=b[0],v=b[1];return Object(f.jsx)(g.Provider,{value:{runner:i,setRunner:j,runs:x,setRuns:v,runnerPosition:u,setRunnerPosition:o,addRun:function(e){v((function(n){return[].concat(Object(O.a)(n),[e])}))}},children:n})},v=t(29),h=t(16),p=function(e){var n=e.runs,t={track2Polygon:function(e){return e.map((function(e){return[e.latitude,e.longitude]}))},calcArea:function(e){var n=e.map((function(e){return[e.latitude,e.longitude]})),t=Object(h.polygon)([n]);return Object(h.area)(t)/1e6}};return Object(f.jsx)(f.Fragment,{children:n.map((function(e,n){return Object(f.jsx)(v.a,{positions:t.track2Polygon(e.track.trackPoints)})}))})},R=t(30),m=t(31),S=t(4),C=function(){var e=Object(r.useContext)(g),n=e.runnerPosition,t=e.setRunnerPosition,c=Object(R.a)();return Object(r.useEffect)((function(){navigator.geolocation.getCurrentPosition((function(e){t(new S.LatLng(e.coords.latitude,e.coords.longitude))}))}),[]),Object(r.useEffect)((function(){n&&c.setView(n)}),[n]),Object(f.jsx)(f.Fragment,{children:n&&Object(f.jsx)(m.a,{position:n})})},k=function(e){var n=e.runnersRunController,t=Object(r.useContext)(g),c=t.runner,u=t.runs,o=t.setRuns,s=Object(r.useState)(!1),a=Object(l.a)(s,2),i=a[0],j=a[1];return Object(r.useEffect)((function(){n.getRunsOfRunner(c.runnerName).then((function(e){o(e)}))}),[c]),Object(f.jsxs)("div",{style:{width:"100%",height:"50%"},children:[Object(f.jsxs)(d.a,{className:"basicMap",center:[0,0],zoom:20,scrollWheelZoom:!1,style:{width:"100%",height:"600px",borderRadius:"8px"},children:[Object(f.jsx)(b.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),i&&Object(f.jsx)(p,{runs:u}),Object(f.jsx)(C,{})]}),Object(f.jsx)("button",{onClick:function(){return j(!i)},children:"Show Runs"})]})},P=[{runnerName:"Tim",runnerRunIds:[]},{runnerName:"Leonie",runnerRunIds:[3]}],w=function(){return{getTracks:function(e){var n=[];for(var t in P)P[t].runnerName===e&&(n=P[t].runnerRunIds);return Promise.resolve(n)},getRunner:function(e){return Promise.resolve(P.find((function(n){return n.runnerName===e})))}}},y=function(){var e=localStorage.getItem("runs"),n=e?JSON.parse(e):void 0;return{getRun:function(e){var t=void 0;for(var r in n)n[r].runId===e&&(t=n[r]);return Promise.resolve(t)},saveRuns:function(e){localStorage.setItem("runs",JSON.stringify(e))}}},N=function(e){var n=w(),t=y(),c=function(e){return{getRunsOfRunner:Object(r.useCallback)((function(n){return e.getRuns(n)}),[e])}}(j(n,t));return Object(f.jsx)(k,{runnersRunController:c})},F=Object(r.createContext)({}),I=function(e){var n=e.children,t=Object(r.useState)(),c=Object(l.a)(t,2),u=c[0],o=c[1],s=Object(r.useState)([]),a=Object(l.a)(s,2),i=a[0],j=a[1],d=Object(r.useState)(),b=Object(l.a)(d,2),g=b[0],x=b[1],v=Object(r.useState)(null),h=Object(l.a)(v,2),p=h[0],R=h[1];return Object(f.jsx)(F.Provider,{value:{speed:p,setSpeed:R,run:g,startRun:function(){console.log("Start Run"),o(Date.now())},stopRun:function(){console.log("Stop Run"),x({track:{trackPoints:i},startTime:u||Date.now(),endTime:Date.now()})},addTrackPoint:function(e){console.log("Add TrackPoint: ",e),j((function(n){return[].concat(Object(O.a)(n),[e])}))},resetRun:function(){x(void 0),o(void 0),R(null),j([])}},children:n})},T=function(e){var n=Object(r.useContext)(F).speed;return Object(f.jsx)(f.Fragment,{children:n&&Object(f.jsxs)("div",{children:["Speed: ",n]})})},L=function(e){var n=Object(r.useState)(""),t=Object(l.a)(n,2),c=t[0],u=t[1],o=w(),s=y(),a=j(o,s),i=Object(r.useContext)(g).setRunner;return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"text",onChange:function(e){u(e.target.value)},value:c,placeholder:"Enter your Name:"}),Object(f.jsx)("button",{onClick:function(){console.log("Login "+c),a.getRunner(c).then((function(e){e&&i(e)}))},children:"Login"})]})},E=function(e){var n=Object(r.useContext)(g).runner;return Object(f.jsxs)("div",{children:["Hello ",n.runnerName]})},D=function(){var e=Object(r.useContext)(F),n=e.addTrackPoint,t=e.startRun,c=e.stopRun,u=e.run,o=e.setSpeed,s=e.resetRun,a=Object(r.useContext)(g),i=a.addRun,j=a.runs,d=Object(r.useState)(!1),b=Object(l.a)(d,2),x=b[0],v=b[1],h=Object(r.useState)(),p=Object(l.a)(h,2),R=p[0],m=p[1],S=y(),C={enableHighAccuracy:!0},k=function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))},P=function(e){console.log("Speed: ",e.coords.speed),o(e.coords.speed),n({latitude:e.coords.latitude,longitude:e.coords.longitude,time:Date.now()})};return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("button",{onClick:function(){t();var e=navigator.geolocation.watchPosition(P,k,C);m(e),v(!0)},disabled:x,children:"Start"}),Object(f.jsx)("button",{onClick:function(){c(),R&&navigator.geolocation.clearWatch(R),v(!1)},disabled:!x,children:"Stop"}),Object(f.jsx)("button",{onClick:function(){console.log("Save run"),S.saveRuns([].concat(Object(O.a)(j),[u])),i(u)},disabled:x,children:"Save"}),Object(f.jsx)("button",{onClick:function(){console.log("Reset run"),s()},disabled:x,children:"Reset"})]})};var z=function(){var e=Object(r.useContext)(g).runner;return Object(f.jsx)(f.Fragment,{children:""===(null===e||void 0===e?void 0:e.runnerName)?Object(f.jsx)(L,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(E,{}),Object(f.jsx)(N,{}),Object(f.jsx)(T,{}),Object(f.jsx)(D,{})]})})},J=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,34)).then((function(n){var t=n.getCLS,r=n.getFID,c=n.getFCP,u=n.getLCP,o=n.getTTFB;t(e),r(e),c(e),u(e),o(e)}))};o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(x,{children:Object(f.jsx)(I,{children:Object(f.jsx)(z,{})})})}),document.getElementById("root")),J()}},[[28,1,2]]]);
//# sourceMappingURL=main.d008dfde.chunk.js.map