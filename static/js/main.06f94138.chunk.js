(this["webpackJsonprun-zone-ts"]=this["webpackJsonprun-zone-ts"]||[]).push([[0],{39:function(n,e,t){},40:function(n,e,t){},45:function(n,e,t){"use strict";t.r(e);var c,r=t(0),i=t.n(r),o=t(19),a=t.n(o),s=(t(39),t(4)),u=(t(40),t(14)),j=t(3),l=t(8),b=t(1),d=Object(r.createContext)({runnerPosition:void 0,runnerSpeed:null,runner:void 0,runs:[],setRunner:function(n){},setRuns:function(n){},addRun:function(n){},setRunnerPosition:function(n){}}),O=function(n){var e=n.children,t=Object(r.useState)([]),c=Object(j.a)(t,2),i=c[0],o=c[1],a=Object(r.useState)(),s=Object(j.a)(a,2),O=s[0],f=s[1],x=Object(r.useState)(null),h=Object(j.a)(x,2),p=h[0],g=h[1],v=Object(r.useState)(),m=Object(j.a)(v,2),R=m[0],S=m[1],w={enableHighAccuracy:!0},k=function(n){console.warn("ERROR(".concat(n.code,"): ").concat(n.message))},N=function(n){f(new l.LatLng(n.coords.latitude,n.coords.longitude)),n.coords.speed&&g((3.6*n.coords.speed).toFixed(1))};return Object(r.useEffect)((function(){navigator.geolocation.watchPosition(N,k,w)}),[]),Object(b.jsx)(d.Provider,{value:{runner:R,setRunner:S,runs:i,setRuns:o,runnerPosition:O,setRunnerPosition:f,addRun:function(n){o((function(e){return[].concat(Object(u.a)(e),[n])}))},runnerSpeed:p},children:e})};!function(n){n.RUNNER="runner",n.RUNS="runs"}(c||(c={}));var f,x,h,p,g,v=function(){return{getRunner:function(){var n=localStorage.getItem(c.RUNNER);return n?JSON.parse(n):void 0},setRunner:function(n){localStorage.setItem(c.RUNNER,JSON.stringify(n))},removeRunner:function(){localStorage.removeItem(c.RUNNER)}}},m=t(5);!function(n){n.FONT_FAMILY_MAIN="Open Sans Condensed, sans-serif",n.BACKGROUND_COLOR_MAIN="#343a40"}(f||(f={}));var R,S,w,k,N,C,y,P,I,E,F=function(n){var e=Object(r.useState)(""),t=Object(j.a)(e,2),c=t[0],i=t[1],o=v(),a=Object(r.useContext)(d).setRunner;return Object(b.jsxs)(T,{children:[Object(b.jsx)(L,{children:"Willkommen!"}),Object(b.jsx)(A,{type:"text",onChange:function(n){i(n.target.value)},value:c,placeholder:"Wie hei\xdft du?"}),Object(b.jsx)(z,{onClick:function(){console.log("Login "+c);var n={runnerName:c,runnerRunIds:[]};o.setRunner(n),a(n)},children:"Login"})]})},L=m.a.h3(x||(x=Object(s.a)(["\n  font-family: ",";\n  font-size: 24px;\n  text-transform: uppercase;\n  color: #343a40;\n  font-weight: bold;\n  margin: 0 0 30% 0;\n"])),f.FONT_FAMILY_MAIN),T=m.a.div(h||(h=Object(s.a)(["\n  width: 20%;\n  min-width: 300px;\n  height: 80%;\n  min-height: 500px;\n  background-color: aliceblue;\n  border-radius: 10px;\n  box-shadow: 10px 10px #282c34;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  margin: 10% auto auto auto;\n"]))),A=m.a.input(p||(p=Object(s.a)(["\n  width: 70%;\n  height: 40px;\n  border: none;\n  border-radius: 10px;\n  margin: 5px;\n  text-align: center;\n"]))),z=m.a.button(g||(g=Object(s.a)(["\n  width: 70%;\n  height: 50px;\n  background-color: #343a40;\n  color: white;\n  border-radius: 10px;\n  margin: 5px;\n"]))),M=t(31),U=t(51),D=t(49),_=t(46),W=t(25),J=function(){return{track2Polygon:function(n){return n.map((function(n){return[n.latitude,n.longitude]}))},calcArea:function(n){var e=n.map((function(n){return[n.latitude,n.longitude]})),t=Object(W.polygon)([e]);return Object(W.area)(t)/1e6}}},B=function(n){var e=n.runs,t=J();return Object(b.jsx)(b.Fragment,{children:e.map((function(n,e){return Object(b.jsx)(_.a,{positions:t.track2Polygon(n.track.trackPoints)})}))})},Z=t(47),V=t(48),Y=function(){var n=Object(r.useContext)(d).runnerPosition,e=Object(Z.a)();return Object(r.useEffect)((function(){n&&e.setView(n)}),[n]),Object(b.jsx)(b.Fragment,{children:n&&Object(b.jsx)(V.a,{position:n})})},G=function(n){var e=n.setShowRuns;return Object(b.jsx)("div",{className:"leaflet-top leaflet-right",children:Object(b.jsx)("div",{className:"leaflet-control",children:Object(b.jsx)("button",{onClick:function(){return e((function(n){return!n}))},children:"Show Runs"})})})},K=function(n){Object(M.a)(n);var e=Object(r.useContext)(d).runs,t=Object(r.useState)(!1),c=Object(j.a)(t,2),i=c[0],o=c[1];return Object(b.jsxs)(H,{className:"basicMap",center:[0,0],zoom:20,scrollWheelZoom:!1,children:[Object(b.jsx)(U.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),i&&Object(b.jsx)(B,{runs:e}),Object(b.jsx)(Y,{}),Object(b.jsx)(G,{setShowRuns:o})]})},H=Object(m.a)(D.a)(R||(R=Object(s.a)(["\n  width: 100%;\n  height: 400px;\n  border-radius: 8px;\n"]))),q=function(n){return Object(b.jsx)(K,{})},Q=Object(r.createContext)({}),X=function(n){var e=n.children,t=Object(r.useState)(),c=Object(j.a)(t,2),i=c[0],o=c[1],a=Object(r.useState)([]),s=Object(j.a)(a,2),l=s[0],d=s[1],O=Object(r.useState)(),f=Object(j.a)(O,2),x=f[0],h=f[1],p=Object(r.useState)(!1),g=Object(j.a)(p,2),v=g[0],m=g[1];return Object(b.jsx)(Q.Provider,{value:{startTime:i,isRunning:v,setIsRunning:m,run:x,startRun:function(){console.log("Start Run"),o(Date.now()),m(!0)},stopRun:function(){console.log("Stop Run"),h({track:{trackPoints:l},startTime:i||Date.now(),endTime:Date.now()}),m(!1)},addTrackPoint:function(n){console.log("Add TrackPoint: ",n),d((function(e){return[].concat(Object(u.a)(e),[n])}))},resetRun:function(){h(void 0),o(void 0),d([])}},children:e})},$=function(){var n=localStorage.getItem(c.RUNS),e=n?JSON.parse(n):void 0;return{saveRuns:function(n){localStorage.setItem(c.RUNS,JSON.stringify(n))},getAllRuns:function(){return e}}},nn=t(50),en=t(52),tn=function(){var n=Object(r.useContext)(d).runnerPosition,e=Object(r.useContext)(Q),t=e.addTrackPoint,c=e.startRun,i=e.stopRun,o=e.run,a=e.resetRun,s=e.isRunning,j=Object(r.useContext)(d),l=j.addRun,O=j.runs,f=$();Object(r.useEffect)((function(){s&&x()}),[n]);var x=function(){n&&t({latitude:n.lat,longitude:n.lng,time:Date.now()})};return Object(b.jsxs)(nn.a,{size:"lg",children:[Object(b.jsx)(en.a,{onClick:function(){c()},disabled:s,variant:"dark",children:"Start"}),Object(b.jsx)(en.a,{onClick:function(){i()},disabled:!s,variant:"dark",children:"Stop"}),Object(b.jsx)(en.a,{onClick:function(){console.log("Save run"),f.saveRuns([].concat(Object(u.a)(O),[o])),l(o)},disabled:s,variant:"dark",children:"Save"}),Object(b.jsx)(en.a,{onClick:function(){console.log("Reset run"),a()},disabled:s,variant:"dark",children:"Reset"})]})},cn=function(n){var e=n.property,t=n.value;return Object(b.jsxs)(rn,{children:[Object(b.jsx)(an,{children:e}),Object(b.jsx)(sn,{children:t})]})},rn=m.a.div(S||(S=Object(s.a)(["\n  width: 20%;\n  min-width: 120px;\n  background-color: #555;\n  border-radius: 10px;\n  padding: 10px;\n  margin: 10px 5px 10px 5px;\n"]))),on=m.a.div(w||(w=Object(s.a)(["\n  font-family: Open Sans Condensed, sans-serif;\n  font-weight: bold;\n  text-transform: uppercase;\n  color: #eee;\n"]))),an=Object(m.a)(on)(k||(k=Object(s.a)(["\n  font-size: 28px;\n"]))),sn=Object(m.a)(on)(N||(N=Object(s.a)(["\n  font-size: 24px;\n"]))),un=function(){var n=Object(r.useContext)(d).runnerSpeed,e=Object(r.useContext)(Q),t=e.startTime,c=e.isRunning,i=Object(r.useState)(0),o=Object(j.a)(i,2),a=o[0],s=o[1],u=Object(r.useState)(),l=Object(j.a)(u,2),O=l[0],f=l[1];return Object(r.useEffect)((function(){if(c){var n=setInterval((function(){t&&s(Date.now()-t)}),1e3);f(n)}else O&&clearInterval(O)}),[c]),Object(b.jsxs)(jn,{children:[Object(b.jsx)(cn,{property:"Speed",value:n?n+" [km/h]":"--"}),Object(b.jsx)(cn,{property:"Time",value:new Date(a).toISOString().substr(11,8)})]})},jn=m.a.div(C||(C=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  width: 100%;\n  height: 50%;\n  padding: 5px;\n  flex-wrap: wrap;\n"]))),ln=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(q,{}),Object(b.jsx)(tn,{}),Object(b.jsx)(un,{})]})},bn=function(n){var e=n.center,t=Object(Z.a)();return Object(r.useEffect)((function(){t.setView(e)}),[e]),Object(b.jsx)(b.Fragment,{})},dn=function(){var n=Object(r.useContext)(d).runs,e=Object(r.useState)(),t=Object(j.a)(e,2),c=t[0],i=t[1],o=Object(r.useState)(0),a=Object(j.a)(o,2),s=a[0],u=a[1],O=function(n){var e=n.track.trackPoints[0];return new l.LatLng(e.latitude,e.longitude)},f=Object(r.useState)(n.length>0?O(n[0]):new l.LatLng(0,0)),x=Object(j.a)(f,2),h=x[0],p=x[1],g=J();Object(r.useEffect)((function(){n.length>0&&(i(n[0]),p(O(n[0])))}),[]),Object(r.useEffect)((function(){i(n[s]),p(O(n[s]))}),[s]);var v=function(e){u((function(t){var c;return c=(c=t+e>=n.length-1?n.length-1:t+e)<0?0:c}))};return Object(b.jsxs)(b.Fragment,{children:[c&&Object(b.jsx)(xn,{children:new Date(c.startTime).toUTCString()}),Object(b.jsxs)(On,{className:"basicMap",center:h,zoom:20,scrollWheelZoom:!1,children:[Object(b.jsx)(U.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png"}),Object(b.jsx)(bn,{center:h}),c&&Object(b.jsx)(_.a,{positions:g.track2Polygon(c.track.trackPoints)})]}),Object(b.jsxs)("div",{children:[Object(b.jsx)(fn,{variant:"dark",disabled:s<=0,onClick:function(){return v(-1)},children:"Zur\xfcck"}),Object(b.jsx)(fn,{variant:"dark",disabled:s>=n.length-1,onClick:function(){return v(1)},children:"Vor"})]})]})},On=Object(m.a)(D.a)(y||(y=Object(s.a)(["\n  width: 100%;\n  height: 400px;\n  border-radius: 8px;\n"]))),fn=Object(m.a)(en.a)(P||(P=Object(s.a)(["\n  width: 50%;\n"]))),xn=m.a.div(I||(I=Object(s.a)(["\n  color: white;\n  text-align: center;\n  padding: 2px;\n"])));!function(n){n.ROOT="/",n.NEW="new",n.RUNS="runs"}(E||(E={}));var hn,pn,gn,vn,mn,Rn,Sn,wn=t(2),kn=t(15),Nn=function(n){var e=n.to,t=n.value;return Object(b.jsx)(Cn,{to:e,children:t})},Cn=Object(m.a)(kn.b)(hn||(hn=Object(s.a)(["\n  color: white;\n  font-size: 26px;\n  margin: 20px;\n"]))),yn=function(){var n=Object(r.useContext)(d),e=n.setRunner,t=n.setRuns,c=$(),i=v();return{initRuns:function(){t(c.getAllRuns())},initRunner:function(){e(i.getRunner())},removeRunner:function(){e(void 0),i.removeRunner()}}},Pn=function(){var n=yn();return Object(b.jsxs)("div",{children:[Object(b.jsx)(Nn,{to:E.NEW,value:"Neu"}),Object(b.jsx)(Nn,{to:E.RUNS,value:"L\xe4ufe"}),Object(b.jsx)(In,{onClick:function(){return n.removeRunner()},children:"Logout"})]})},In=m.a.button(pn||(pn=Object(s.a)(["\n  color: white;\n  font-size: 26px;\n  margin: 20px;\n  background-color: ",";\n  border: none;\n"])),f.BACKGROUND_COLOR_MAIN),En=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(Fn,{children:"Run Zone"}),Object(b.jsx)(Pn,{})]})},Fn=m.a.h2(gn||(gn=Object(s.a)(["\n  color: #eee;\n  font-family: Open Sans Condensed, sans-serif;\n  font-size: 48px;\n  font-weight: bold;\n  line-height: 48px;\n  padding: 0 5px;\n  text-align: center;\n  text-transform: uppercase;\n  min-width: 200px;\n"]))),Ln=function(){var n=Object(r.useContext)(d).runner;return Object(b.jsx)(An,{children:Object(b.jsxs)(Tn,{children:["Willkommen",Object(b.jsx)("br",{}),n.runnerName]})})},Tn=m.a.h3(vn||(vn=Object(s.a)(["\n  font-family: ",";\n  text-align: center;\n  font-size: 3rem;\n  color: white;\n"])),f.FONT_FAMILY_MAIN),An=m.a.div(mn||(mn=Object(s.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin: 10% 0 0 0;\n"])));var zn=m.a.div(Rn||(Rn=Object(s.a)(["\n  width: 80%;\n  height: 100%;\n  margin: auto;\n"]))),Mn=m.a.div(Sn||(Sn=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 1% 0 1% 0;\n  flex-wrap: wrap;\n  margin: 20px 0 20px 0;\n"]))),Un=function(){var n=Object(r.useContext)(d).runner,e=yn();return Object(r.useEffect)((function(){e.initRuns(),e.initRunner()}),[]),n?Object(b.jsxs)(zn,{children:[Object(b.jsx)(Mn,{children:Object(b.jsx)(En,{})}),Object(b.jsxs)(wn.c,{children:[Object(b.jsx)(wn.a,{path:E.ROOT,element:Object(b.jsx)(Ln,{})}),Object(b.jsx)(wn.a,{path:E.NEW,element:Object(b.jsx)(ln,{})}),Object(b.jsx)(wn.a,{path:E.RUNS,element:Object(b.jsx)(dn,{})})]})]}):Object(b.jsx)(zn,{children:Object(b.jsx)(F,{})})},Dn=function(n){n&&n instanceof Function&&t.e(3).then(t.bind(null,53)).then((function(e){var t=e.getCLS,c=e.getFID,r=e.getFCP,i=e.getLCP,o=e.getTTFB;t(n),c(n),r(n),i(n),o(n)}))};a.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(O,{children:Object(b.jsx)(X,{children:Object(b.jsx)(kn.a,{children:Object(b.jsx)(Un,{})})})})}),document.getElementById("root")),Dn()}},[[45,1,2]]]);
//# sourceMappingURL=main.06f94138.chunk.js.map